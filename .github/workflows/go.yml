name: Go

on:
  - push 
  - workflow_dispatch 
#    branches: [ main ]
  

jobs:

  build:
    runs-on: ubuntu-latest
    steps: 
    - name: Setup 
      run: echo ${{github}} 
      
    - name: Checkout 
      uses: actions/checkout@v3 

    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: 1.17

    - name: Build
      run: go build -v ./...

    - name: Test
      run: go test -v ./... 

  run: 
    runs-on: ubuntu-latest 
    steps: 
    - name: Checkout 
      uses: actions/checkout@v3 

    - name: Set up Go 
      uses: actions/setup-go@v3 
      with: 
        go-version: 1.17 
    - name: Run 
      run: go run ./cmd/main.go -c main.go 
